## 1. 예제 만들기

### 1. 로그 추적기 - 요구사항 분석
- 모든 PUBLIC 메서드의 호출과 응답 정보 로그 출력
- 애플리케이션 흐름 미변겅
- 메서드 호출 걸린 시간
- 정상 흐름과 예외 흐름 구분
- 메서드 호출 깊이 표현
- HTTP 요청 구분

### 2. 로그 추적기
- HTTP 요청 구분 및 깊이 표현 -> TraceId 동기화 필요
- TraceId 동기화 -> 관련 메서드의 모든 파라미터 수정
- 로그 처음 시작 시 begin() 호출, 처음이 아닐때 beginSync() 호출

## 2. 쓰레드 로컬 - ThreadLocal

### 1. 필드 동기화 - 동시성 문제
- 동시성 문제 : 여러 쓰레드가 동시에 같은 인스턴스의 필드 값을 변경하면서 발생하는 문제
- 트래픽 증가 -> 동시성 문제 증가

### 2. ThreadLocal
- 쓰레드 로컬 : 해당 쓰레드만 접근할 수 있는 특별한 저장소
- 쓰레드 로컬 사용 후 미제거 -> WAS처럼 쓰레드 풀 사용 시 심각한 문제 발생

## 3. 템플릿 메서드 패턴과 콜백 패턴

### 1. 템플릿 메서드 패턴
- 핵심 기능 : 해당 객체가 제공하는 고유 기능
- 부가 기능 : 핵심 기능을 보조하기 위해 제공되는 기능
- 템플릿 메서드 패턴 : 다형성을 사용해서 변하는 부분과 변하지 않는 부분을 분리하는 방법
  - 부모 클래스 : 알고리즘의 골격인 템플릿 정의
  - 자식 클래스 : 일부 변경되는 로직 정의
  - 자식 클래스 -> 부모 클래스를 알아야 함
  - 상속 구조 사용 -> 별도의 클래스나 익명 내부 클래스 생성 필요성 존재
- 익명 내부 클래스 사용 -> 객체 인스턴스 생성 및 상속 받은 자식 클래스 정의 가능
- 단일 책임 원칙(SRP) : 변경 지점을 하나로 모아서 변경에 쉽게 대처할 수 있는 구조

### 2. 전략 패턴
- Context : 변하지 않는 부분 정의
- Strategy : 변하는 부분 정의, 위임으로 문제 해결

### 3. 템플릿 콜백 패턴
- 콜백 : 다른 코드의 인수로서 넘겨주는 실행 가능한 코드
- 템플릿 콜백 패턴 : 전략 패턴에서 Context가 템플릿 역할, Strategy 부분이 콜백으로 넘어옴
  - 스프링 내부 패턴
  - 템플릿과 콜백 부분이 강조된 패턴